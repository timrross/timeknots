!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n={draw:function(t,e,o){var n,r,i,a,l,u={width:600,height:200,radius:10,lineWidth:4,color:"#999",background:"#FFF",dateFormat:"%Y/%m/%d %H:%M:%S",horizontalLayout:!0,showLabels:!1,labelFormat:"%Y/%m/%d %H:%M:%S",addNow:!1,seriesColor:d3.scaleOrdinal(d3.schemeCategory10),dateDimension:!0,onClick:null};void 0!==o&&Object.assign(u,o),!1!==u.addNow&&e.push({date:new Date,name:u.addNowLabel||"Today"});var d=d3.select(t).append("div").style("opacity",0).style("position","absolute").style("font-family","Helvetica Neue").style("font-weight","300").style("background","rgba(0,0,0,0.5)").style("color","white").style("padding","5px 10px 5px 10px").style("-moz-border-radius","8px 8px").style("border-radius","8px 8px"),s=d3.select(t).append("svg").attr("width",u.width).attr("height",u.height);u.dateDimension?(n=e.map(function(t){return Date.parse(t.date)}),i=d3.max(n),r=d3.min(n)):(n=e.map(function(t){return t.value}),i=d3.max(n),r=d3.min(n)),a=1.5*(d3.max(e.map(function(t){return t.radius}))||u.radius)+u.lineWidth,l=u.horizontalLayout?(u.width-2*a)/(i-r):(u.height-2*a)/(i-r);var c=[];i===r&&(l=0,a=u.horizontalLayout?u.width/2:u.height/2);var h,f,y,p={x1:null,x2:null,y1:null,y2:null};function m(t){d3.select(t).style("fill",function(t){return void 0!==t.color?t.color:u.color}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?Math.floor(1.5*t.radius):Math.floor(1.5*u.radius)})}s.selectAll("line").data(e).enter().append("line").attr("class","timeline-line").attr("x1",function(t){var e;if(u.horizontalLayout){var o=u.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(l*(o-r)+a)}else e=Math.floor(u.width/2);return p.x1=e,e}).attr("x2",function(){return null!=p.x1?p.x1:Math.floor(u.width/2)}).attr("y1",function(t){var e;if(u.horizontalLayout)e=Math.floor(u.height/2);else{var o=u.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(l*(o-r))+a}return p.y1=e,e}).attr("y2",function(t){if(null!==p.y1)return p.y1;if(u.horizontalLayout)return Math.floor(u.height/2);var e=u.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(l*(e-r))}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(c.indexOf(t.series)<0&&c.push(t.series),u.seriesColor(c.indexOf(t.series))):u.color}).style("stroke-width",u.lineWidth),s.selectAll("circle").data(e).enter().append("circle").attr("class","timeline-event").attr("r",function(t){return void 0!==t.radius?t.radius:u.radius}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(c.indexOf(t.series)<0&&c.push(t.series),u.seriesColor(c.indexOf(t.series))):u.color}).style("stroke-width",function(t){return void 0!==t.lineWidth?t.lineWidth:u.lineWidth}).style("fill",function(t){return void 0!==t.background?t.background:u.background}).attr("cy",function(t){if(u.horizontalLayout)return Math.floor(u.height/2);var e=u.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(l*(e-r)+a)}).attr("cx",function(t){if(u.horizontalLayout){var e=u.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(l*(e-r)+a)}return Math.floor(u.width/2)}).on("mouseover",function(t){var e,o;u.dateDimension?o=""!==(e=d3.timeFormat(u.dateFormat)(new Date(t.date)))?"".concat(t.name," <small>(").concat(e,")</small>"):t.name:(e=t.value,o="".concat(t.name," <small>(").concat(t.value,")</small>")),m(this),d.html(""),void 0!==t.img&&d.append("img").style("float","left").style("margin-right","4px").attr("src",t.img).attr("width","64px"),d.append("div").style("float","left").html(o),d.transition().duration(100).style("opacity",.9)}).on("mouseout",function(t){var e;t.selected||(e=this,d3.select(e).style("fill",function(t){return void 0!==t.background?t.background:u.background}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?t.radius:u.radius})),d.transition().duration(100).style("opacity",0)}).on("click",function(t){"function"==typeof u.onClick&&u.onClick(t)}).each(function(t){t.selected&&m(this)}),!1!==u.showLabels&&(u.dateDimension?(f=(h=d3.timeFormat(u.labelFormat))(new Date(r)),y=h(new Date(i))):(f=r,y=i),s.append("text").text(f).style("font-size","70%").attr("x",function(){return u.horizontalLayout?d3.max([0,a-this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return u.horizontalLayout?Math.floor(u.height/2+(a+this.getBBox().height)):a+this.getBBox().height/2}),s.append("text").text(y).style("font-size","70%").attr("x",function(){return u.horizontalLayout?u.width-d3.max([this.getBBox().width,a+this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return u.horizontalLayout?Math.floor(u.height/2+(a+this.getBBox().height)):u.height-a+this.getBBox().height/2})),s.on("mousemove",function(){var t=parseInt(d.style("height").replace("px",""),10);return d.style("top","".concat(d3.event.pageY-t-a,"px")).style("left","".concat(d3.event.pageX+20,"px"))}),s.on("mouseout",function(){return d.style("opacity",0).style("top","0px").style("left","0px")})}};window.TimeKnots=n,e.default=n}]);