!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){t.exports=d3},function(t,e,o){"use strict";o.r(e);var n=o(0);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return o}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i={draw:function(t,e,o){var i,a,l,u,s,d={width:600,height:200,radius:10,lineWidth:4,color:"#999",background:"#FFF",dateFormat:"%Y/%m/%d %H:%M:%S",horizontalLayout:!0,showLabels:!1,labelFormat:"%Y/%m/%d %H:%M:%S",addNow:!1,seriesColor:n.scaleOrdinal(n.schemeCategory10),dateDimension:!0,onClick:null};void 0!==o&&Object.assign(d,o),!1!==d.addNow&&e.push({date:new Date,name:d.addNowLabel||"Today"});var c=n.select(t).style("position","relative").append("div").style("opacity",0).style("position","absolute").style("font-family","Helvetica Neue").style("font-weight","300").style("background","rgba(0,0,0,0.5)").style("color","white").style("padding","5px 10px 5px 10px").style("-moz-border-radius","8px 8px").style("border-radius","8px 8px"),h=n.select(t).append("svg").attr("width",d.width).attr("height",d.height);d.dateDimension?(i=e.map(function(t){return Date.parse(t.date)}),l=n.max(i),a=n.min(i)):(i=e.map(function(t){return t.value}),l=n.max(i),a=n.min(i)),u=1.5*(n.max(e.map(function(t){return t.radius}))||d.radius)+d.lineWidth,s=d.horizontalLayout?(d.width-2*u)/(l-a):(d.height-2*u)/(l-a);var f=[];l===a&&(s=0,u=d.horizontalLayout?d.width/2:d.height/2);var y,p,m,v={x1:null,x2:null,y1:null,y2:null};function g(t){n.select(t).style("fill",function(t){return void 0!==t.color?t.color:d.color}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?Math.floor(1.5*t.radius):Math.floor(1.5*d.radius)})}h.selectAll("line").data(e).enter().append("line").attr("class","timeline-line").attr("x1",function(t){var e;if(d.horizontalLayout){var o=d.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(s*(o-a)+u)}else e=Math.floor(d.width/2);return v.x1=e,e}).attr("x2",function(){return null!=v.x1?v.x1:Math.floor(d.width/2)}).attr("y1",function(t){var e;if(d.horizontalLayout)e=Math.floor(d.height/2);else{var o=d.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(s*(o-a))+u}return v.y1=e,e}).attr("y2",function(t){if(null!==v.y1)return v.y1;if(d.horizontalLayout)return Math.floor(d.height/2);var e=d.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(s*(e-a))}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(f.indexOf(t.series)<0&&f.push(t.series),d.seriesColor(f.indexOf(t.series))):d.color}).style("stroke-width",d.lineWidth),h.selectAll("circle").data(e).enter().append("circle").attr("class","timeline-event").attr("r",function(t){return void 0!==t.radius?t.radius:d.radius}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(f.indexOf(t.series)<0&&f.push(t.series),d.seriesColor(f.indexOf(t.series))):d.color}).style("stroke-width",function(t){return void 0!==t.lineWidth?t.lineWidth:d.lineWidth}).style("fill",function(t){return void 0!==t.background?t.background:d.background}).attr("cy",function(t){if(d.horizontalLayout)return Math.floor(d.height/2);var e=d.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(s*(e-a)+u)}).attr("cx",function(t){if(d.horizontalLayout){var e=d.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(s*(e-a)+u)}return Math.floor(d.width/2)}).on("mouseover",function(t){var e,o;d.dateDimension?o=""!==(e=n.timeFormat(d.dateFormat)(new Date(t.date)))?"".concat(t.name," <small>(").concat(e,")</small>"):t.name:(e=t.value,o="".concat(t.name," <small>(").concat(t.value,")</small>")),g(this),c.html(""),void 0!==t.img&&c.append("img").style("float","left").style("margin-right","4px").attr("src",t.img).attr("width","64px"),c.append("div").style("float","left").html(o),c.transition().duration(100).style("opacity",.9)}).on("mouseout",function(t){var e;t.selected||(e=this,n.select(e).style("fill",function(t){return void 0!==t.background?t.background:d.background}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?t.radius:d.radius})),c.transition().duration(100).style("opacity",0)}).on("click",function(t){"function"==typeof d.onClick&&d.onClick(t)}).each(function(t){t.selected&&g(this)}),!1!==d.showLabels&&(d.dateDimension?(p=(y=n.timeFormat(d.labelFormat))(new Date(a)),m=y(new Date(l))):(p=a,m=l),h.append("text").text(p).style("font-size","70%").attr("x",function(){return d.horizontalLayout?n.max([0,u-this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return d.horizontalLayout?Math.floor(d.height/2+(u+this.getBBox().height)):u+this.getBBox().height/2}),h.append("text").text(m).style("font-size","70%").attr("x",function(){return d.horizontalLayout?d.width-n.max([this.getBBox().width,u+this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return d.horizontalLayout?Math.floor(d.height/2+(u+this.getBBox().height)):d.height-u+this.getBBox().height/2})),h.on("mousemove",function(){var t=parseInt(c.style("height").replace("px",""),10),e=r(n.mouse(this),2),o=e[0],i=e[1];return c.style("top","".concat(i-t-u,"px")).style("left","".concat(o+u/2,"px"))}),h.on("mouseout",function(){return c.style("opacity",0).style("top","0px").style("left","0px")})}};window.TimeKnots=i,e.default=i}]);