!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return o}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}o.r(e);var r={draw:function(t,e,o){var r,i,a,l,u,s={width:600,height:200,radius:10,lineWidth:4,color:"#999",background:"#FFF",dateFormat:"%Y/%m/%d %H:%M:%S",horizontalLayout:!0,showLabels:!1,labelFormat:"%Y/%m/%d %H:%M:%S",addNow:!1,seriesColor:d3.scaleOrdinal(d3.schemeCategory10),dateDimension:!0,onClick:null};void 0!==o&&Object.assign(s,o),!1!==s.addNow&&e.push({date:new Date,name:s.addNowLabel||"Today"});var d=d3.select(t).style("position","relative").append("div").style("opacity",0).style("position","absolute").style("font-family","Helvetica Neue").style("font-weight","300").style("background","rgba(0,0,0,0.5)").style("color","white").style("padding","5px 10px 5px 10px").style("-moz-border-radius","8px 8px").style("border-radius","8px 8px"),c=d3.select(t).append("svg").attr("width",s.width).attr("height",s.height);s.dateDimension?(r=e.map(function(t){return Date.parse(t.date)}),a=d3.max(r),i=d3.min(r)):(r=e.map(function(t){return t.value}),a=d3.max(r),i=d3.min(r)),l=1.5*(d3.max(e.map(function(t){return t.radius}))||s.radius)+s.lineWidth,u=s.horizontalLayout?(s.width-2*l)/(a-i):(s.height-2*l)/(a-i);var h=[];a===i&&(u=0,l=s.horizontalLayout?s.width/2:s.height/2);var f,y,p,m={x1:null,x2:null,y1:null,y2:null};function v(t){d3.select(t).style("fill",function(t){return void 0!==t.color?t.color:s.color}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?Math.floor(1.5*t.radius):Math.floor(1.5*s.radius)})}c.selectAll("line").data(e).enter().append("line").attr("class","timeline-line").attr("x1",function(t){var e;if(s.horizontalLayout){var o=s.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(u*(o-i)+l)}else e=Math.floor(s.width/2);return m.x1=e,e}).attr("x2",function(){return null!=m.x1?m.x1:Math.floor(s.width/2)}).attr("y1",function(t){var e;if(s.horizontalLayout)e=Math.floor(s.height/2);else{var o=s.dateDimension?new Date(t.date).getTime():t.value;e=Math.floor(u*(o-i))+l}return m.y1=e,e}).attr("y2",function(t){if(null!==m.y1)return m.y1;if(s.horizontalLayout)return Math.floor(s.height/2);var e=s.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(u*(e-i))}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(h.indexOf(t.series)<0&&h.push(t.series),s.seriesColor(h.indexOf(t.series))):s.color}).style("stroke-width",s.lineWidth),c.selectAll("circle").data(e).enter().append("circle").attr("class","timeline-event").attr("r",function(t){return void 0!==t.radius?t.radius:s.radius}).style("stroke",function(t){return void 0!==t.color?t.color:void 0!==t.series?(h.indexOf(t.series)<0&&h.push(t.series),s.seriesColor(h.indexOf(t.series))):s.color}).style("stroke-width",function(t){return void 0!==t.lineWidth?t.lineWidth:s.lineWidth}).style("fill",function(t){return void 0!==t.background?t.background:s.background}).attr("cy",function(t){if(s.horizontalLayout)return Math.floor(s.height/2);var e=s.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(u*(e-i)+l)}).attr("cx",function(t){if(s.horizontalLayout){var e=s.dateDimension?new Date(t.date).getTime():t.value;return Math.floor(u*(e-i)+l)}return Math.floor(s.width/2)}).on("mouseover",function(t){var e,o;s.dateDimension?o=""!==(e=d3.timeFormat(s.dateFormat)(new Date(t.date)))?"".concat(t.name," <small>(").concat(e,")</small>"):t.name:(e=t.value,o="".concat(t.name," <small>(").concat(t.value,")</small>")),v(this),d.html(""),void 0!==t.img&&d.append("img").style("float","left").style("margin-right","4px").attr("src",t.img).attr("width","64px"),d.append("div").style("float","left").html(o),d.transition().duration(100).style("opacity",.9)}).on("mouseout",function(t){var e;t.selected||(e=this,d3.select(e).style("fill",function(t){return void 0!==t.background?t.background:s.background}).transition().duration(100).attr("r",function(t){return void 0!==t.radius?t.radius:s.radius})),d.transition().duration(100).style("opacity",0)}).on("click",function(t){"function"==typeof s.onClick&&s.onClick(t)}).each(function(t){t.selected&&v(this)}),!1!==s.showLabels&&(s.dateDimension?(y=(f=d3.timeFormat(s.labelFormat))(new Date(i)),p=f(new Date(a))):(y=i,p=a),c.append("text").text(y).style("font-size","70%").attr("x",function(){return s.horizontalLayout?d3.max([0,l-this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return s.horizontalLayout?Math.floor(s.height/2+(l+this.getBBox().height)):l+this.getBBox().height/2}),c.append("text").text(p).style("font-size","70%").attr("x",function(){return s.horizontalLayout?s.width-d3.max([this.getBBox().width,l+this.getBBox().width/2]):Math.floor(this.getBBox().width/2)}).attr("y",function(){return s.horizontalLayout?Math.floor(s.height/2+(l+this.getBBox().height)):s.height-l+this.getBBox().height/2})),c.on("mousemove",function(){var t=parseInt(d.style("height").replace("px",""),10),e=n(d3.mouse(this),2),o=e[0],r=e[1];return d.style("top","".concat(r-t-l,"px")).style("left","".concat(o+l/2,"px"))}),c.on("mouseout",function(){return d.style("opacity",0).style("top","0px").style("left","0px")})}};window.TimeKnots=r,e.default=r}]);